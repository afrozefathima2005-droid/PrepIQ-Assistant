<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrepIQ - AI Based Exam Preparation Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .active-subject { background-color: #eff6ff; border-left: 4px solid #2563eb; color: #1d4ed8; font-weight: 700; }
        .hidden { display: none; }
        .animate-pop { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body class="bg-[#f8fafc] text-slate-800">

    <nav class="bg-[#1e40af] text-white p-4 flex justify-between items-center shadow-xl sticky top-0 z-50 px-8">
        <div class="flex items-center gap-4">
            <div class="bg-white p-2 rounded-xl shadow-inner">
                <i class="fas fa-brain text-[#1e40af] text-2xl"></i>
            </div>
            <div>
                <h1 class="text-2xl font-black tracking-tighter leading-none">PrepIQ</h1>
                <p class="text-[10px] text-blue-200 uppercase tracking-[0.2em] font-bold">St. Peter's College Edition</p>
            </div>
        </div>
        <div class="flex items-center gap-8">
            <div id="test-timer" class="hidden bg-red-500/20 border border-red-500 text-red-500 px-4 py-1 rounded-full font-mono font-bold animate-pulse">
                TIME REMAINING: 29:59
            </div>
            <div class="flex gap-5 text-lg">
                <i class="fas fa-search hover:text-blue-300 cursor-pointer transition"></i>
                <i class="fas fa-folder-open hover:text-blue-300 cursor-pointer" onclick="openGallery()" title="Past Papers"></i>
                <i class="fas fa-user-circle text-2xl cursor-pointer"></i>
            </div>
        </div>
    </nav>

    <main class="container mx-auto py-8 px-6 grid grid-cols-12 gap-8">
        
        <div class="col-span-3 space-y-6">
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 px-5 py-4 border-b border-slate-100 flex justify-between items-center">
                    <span class="text-[11px] font-black text-slate-400 uppercase tracking-widest">Your Timetable</span>
                    <i class="fas fa-calendar-alt text-blue-500"></i>
                </div>
                <div id="subject-list" class="p-3 space-y-1">
                    <button onclick="loadSubject('CCS340')" class="sub-btn w-full text-left p-4 rounded-xl text-sm active-subject transition-all duration-200">
                        <span class="block text-[10px] opacity-60 font-bold">UNIT 1</span>CCS340: Cyber Security
                    </button>
                    <button onclick="loadSubject('CCW331')" class="sub-btn w-full text-left p-4 rounded-xl text-sm hover:bg-slate-50 transition-all duration-200">
                        <span class="block text-[10px] opacity-60 font-bold">UNIT 2</span>CCW331: Business Analytics
                    </button>
                    <button onclick="loadSubject('CS3691')" class="sub-btn w-full text-left p-4 rounded-xl text-sm hover:bg-slate-50 transition-all duration-200">
                        <span class="block text-[10px] opacity-60 font-bold">UNIT 3</span>CS3691: Embedded & IoT
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5 space-y-4">
                <div class="flex items-center gap-3 p-3 bg-green-50 rounded-xl border border-green-100">
                    <i class="fas fa-file-pdf text-green-600"></i>
                    <span class="text-[11px] font-bold text-green-700 leading-tight">Unit_Notes.pdf<br>Analyzed</span>
                </div>
                <button onclick="generateDiagram()" class="w-full bg-[#1e40af] text-white py-4 rounded-xl font-bold text-xs uppercase tracking-widest shadow-lg hover:bg-blue-800 transition-all hover:-translate-y-1 active:translate-y-0">
                    <i class="fas fa-wand-magic-sparkles mr-2"></i> Extract Diagram
                </button>
            </div>
        </div>

        <div class="col-span-6 flex flex-col h-[780px] bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden relative">
            
            <div id="chat-mode" class="flex flex-col h-full">
                <div class="px-6 py-4 border-b flex justify-between items-center bg-white z-10">
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                        <span class="font-bold text-slate-700 tracking-tight">AI Study Assistant</span>
                    </div>
                    <button onclick="speakAnswer()" class="w-10 h-10 rounded-full hover:bg-slate-100 flex items-center justify-center text-blue-600 transition">
                        <i class="fas fa-volume-up"></i>
                    </button>
                </div>

                <div id="chat-window" class="flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar bg-[#f8fafc]/50">
                    </div>

                <div class="p-5 bg-white border-t border-slate-100">
                    <div class="flex items-center gap-4 bg-slate-100 rounded-2xl px-6 py-2 border border-slate-200 focus-within:ring-2 focus-within:ring-blue-400 focus-within:bg-white transition-all">
                        <i class="fas fa-microphone text-slate-400"></i>
                        <input id="user-input" type="text" placeholder="Ask about the subject..." class="bg-transparent flex-1 outline-none py-3 text-sm">
                        <button onclick="addUserMessage()" class="bg-blue-600 text-white w-10 h-10 rounded-xl flex items-center justify-center shadow-lg hover:bg-blue-700 transition">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div id="test-mode" class="hidden h-full flex flex-col p-10 bg-white animate-pop">
                <div class="flex justify-between items-center mb-10">
                    <h2 class="text-3xl font-black text-slate-900 tracking-tighter uppercase">Subject Assessment</h2>
                    <button onclick="toggleMode('chat')" class="text-xs font-bold text-red-500 border border-red-100 px-4 py-2 rounded-xl hover:bg-red-50 uppercase tracking-widest">Quit Exam</button>
                </div>
                <div class="flex-1 space-y-6 overflow-y-auto pr-2 custom-scrollbar">
                    <div class="p-8 bg-blue-50 border-l-[6px] border-blue-600 rounded-2xl shadow-sm">
                        <span class="text-[10px] font-black text-blue-600 uppercase tracking-widest mb-2 block">16 Marks Question</span>
                        <p id="test-q-display" class="text-xl font-bold text-slate-800 leading-tight"></p>
                    </div>
                    <textarea class="w-full flex-1 p-8 rounded-2xl border-2 border-slate-100 outline-none focus:border-blue-500 transition-all font-serif text-xl text-slate-700 bg-slate-50 shadow-inner min-h-[300px]" placeholder="Start writing your detailed answer here... Use bullet points for steps."></textarea>
                </div>
                <button class="mt-8 bg-slate-900 text-white py-5 rounded-2xl font-black text-sm uppercase tracking-[0.2em] shadow-2xl hover:bg-black transition-all">Submit for AI Grading</button>
            </div>
        </div>

        <div class="col-span-3 space-y-6">
            <div class="bg-gradient-to-br from-[#1e3a8a] to-[#1e40af] text-white rounded-3xl p-8 shadow-2xl relative overflow-hidden group">
                <div class="relative z-10">
                    <h3 class="text-xl font-bold mb-2">Practice Exam</h3>
                    <p class="text-blue-200 text-xs mb-8 leading-relaxed">Ready for the 16-mark challenge? Start a timed mock test now.</p>
                    <button onclick="toggleMode('test')" class="w-full bg-white text-blue-900 py-4 rounded-xl font-black text-[10px] uppercase tracking-widest hover:shadow-2xl transition-all active:scale-95">Start Test</button>
                </div>
                <i class="fas fa-award absolute -right-6 -bottom-6 text-9xl text-white/10 group-hover:rotate-12 transition-transform duration-500"></i>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                <span class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] block mb-6">Learning Velocity</span>
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between items-end mb-2">
                            <span class="text-xs font-bold text-slate-600">Syllabus Covered</span>
                            <span class="text-lg font-black text-blue-600">85%</span>
                        </div>
                        <div class="w-full bg-slate-100 h-3 rounded-full overflow-hidden">
                            <div class="bg-blue-600 h-full w-[85%] rounded-full shadow-[0_0_10px_rgba(37,99,235,0.4)]"></div>
                        </div>
                    </div>
                    <div class="pt-4 border-t border-slate-50">
                        <p class="text-[10px] text-slate-400 font-bold uppercase mb-2 italic">Recent Achievement</p>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-fire text-orange-500"></i>
                            <span class="text-xs font-bold">5 Day Study Streak!</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="paper-modal" class="hidden fixed inset-0 bg-slate-900/95 backdrop-blur-md z-[100] flex items-center justify-center p-8">
        <div class="bg-white w-full max-w-5xl rounded-[2.5rem] p-12 shadow-2xl relative animate-pop overflow-hidden">
            <button onclick="closeGallery()" class="absolute top-8 right-8 text-slate-400 hover:text-black transition-colors">
                <i class="fas fa-times-circle text-3xl"></i>
            </button>
            <h3 class="text-3xl font-black text-slate-900 uppercase tracking-tighter mb-10 border-b pb-6">University Repository</h3>
            <div id="paper-grid" class="grid grid-cols-3 gap-8 overflow-y-auto max-h-[500px] p-2">
                </div>
        </div>
    </div>

    <script>
        const subjectDB = {
            'CCS340': { 
                name: 'Cyber Security', 
                ans: 'Based on your PDF notes from Unit 1, Cyber Security focuses on the CIA triad (Confidentiality, Integrity, Availability). Your notes emphasize RSA Cryptosystem as the primary asymmetric key algorithm used in modern networking.',
                diag: '',
                test: 'Explain the working of RSA algorithm with a numerical example including key generation, encryption, and decryption.'
            },
            'CCW331': { 
                name: 'Business Analytics', 
                ans: 'The uploaded file defines Business Analytics as the iterative exploration of data. The CRISP-DM model is highlighted as the industry standard for managing the data mining lifecycle.',
                diag: '',
                test: 'Analyze the six phases of the CRISP-DM model and explain its application in a retail business context.'
            },
            'CS3691': { 
                name: 'Embedded & IoT', 
                ans: 'Your notes describe the IoT Ecosystem through a 4-layer architecture. Sensors collect data in the perception layer, which is then processed using MCUs in the middleware layer.',
                diag: '',
                test: 'Discuss the 4-layer architecture of IoT and compare it with the traditional OSI model for networking.'
            }
        };

        let currentSub = 'CCS340';

        function loadSubject(id) {
            currentSub = id;
            const data = subjectDB[id];
            
            document.querySelectorAll('.sub-btn').forEach(btn => btn.classList.remove('active-subject'));
            event.currentTarget.classList.add('active-subject');
            
            const chat = document.getElementById('chat-window');
            chat.innerHTML = `
                <div class="flex justify-end animate-pop">
                    <div class="bg-blue-600 text-white px-6 py-3 rounded-2xl rounded-tr-none text-sm shadow-lg font-medium">Explain ${data.name} from my notes.</div>
                </div>
                <div class="flex gap-4 animate-pop">
                    <div class="w-12 h-12 bg-slate-900 rounded-2xl flex items-center justify-center text-white shrink-0 shadow-xl"><i class="fas fa-robot text-lg"></i></div>
                    <div class="bg-white border border-slate-200 p-8 rounded-3xl rounded-tl-none shadow-sm w-full">
                        <p class="text-blue-600 font-black text-[10px] uppercase tracking-widest mb-4">PrepIQ Analysis</p>
                        <p class="text-sm text-slate-600 leading-relaxed font-medium">${data.ans}</p>
                    </div>
                </div>`;
            document.getElementById('test-q-display').innerText = data.test;
            chat.scrollTop = chat.scrollHeight;
        }

        function generateDiagram() {
            const chat = document.getElementById('chat-window');
            const data = subjectDB[currentSub];
            chat.innerHTML += `
                <div class="flex gap-4 animate-pop">
                    <div class="w-12 h-12 bg-green-600 rounded-2xl flex items-center justify-center text-white shrink-0 shadow-xl"><i class="fas fa-project-diagram"></i></div>
                    <div class="bg-white border-2 border-green-50 p-8 rounded-3xl rounded-tl-none shadow-lg w-full">
                        <p class="text-green-600 font-black text-[10px] uppercase tracking-widest mb-6"><i class="fas fa-magic mr-2"></i> AI Visual extraction complete</p>
                        <div class="bg-slate-50 p-16 border-2 border-dashed border-blue-200 rounded-3xl text-center text-blue-400 font-black text-xs uppercase italic leading-loose">
                            ${data.diag}
                            <div class="mt-4 text-[9px] text-slate-400 font-bold uppercase tracking-widest">Refer to page 14 of your PDF</div>
                        </div>
                    </div>
                </div>`;
            chat.scrollTop = chat.scrollHeight;
        }

        function toggleMode(mode) {
            document.getElementById('chat-mode').classList.toggle('hidden', mode === 'test');
            document.getElementById('test-mode').classList.toggle('hidden', mode === 'chat');
            document.getElementById('test-timer').classList.toggle('hidden', mode === 'chat');
        }

        function openGallery() {
            document.getElementById('paper-modal').classList.remove('hidden');
            const grid = document.getElementById('paper-grid');
            grid.innerHTML = '';
            ['DEC 2025', 'MAY 2025', 'DEC 2024'].forEach(session => {
                grid.innerHTML += `
                    <div class="bg-slate-50 border-2 border-transparent hover:border-blue-500 hover:bg-white p-10 rounded-[2rem] text-center transition-all cursor-pointer group">
                        <i class="fas fa-file-pdf text-6xl text-red-500 mb-6 group-hover:scale-110 transition-transform"></i>
                        <h4 class="font-black text-slate-800 text-sm mb-1 uppercase tracking-tight">${subjectDB[currentSub].name}</h4>
                        <p class="text-[10px] text-slate-400 font-bold tracking-[0.2em]">${session}</p>
                    </div>`;
            });
        }

        function closeGallery() { document.getElementById('paper-modal').classList.add('hidden'); }
        function speakAnswer() { window.speechSynthesis.speak(new SpeechSynthesisUtterance(subjectDB[currentSub].ans)); }

        window.onload = () => loadSubject('CCS340');
    </script>
</body>
</html>