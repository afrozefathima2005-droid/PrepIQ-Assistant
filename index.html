<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrepIQ - Advanced Exam Cell</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body { font-family: 'Inter', sans-serif; background: #f3f4f6; }
        .unit-card { transition: all 0.3s ease; cursor: pointer; border: 2px solid transparent; }
        .unit-card:hover { transform: translateY(-5px); border-color: #3b82f6; background: #eff6ff; }
        .side-heading { color: #1e40af; font-weight: 800; text-transform: uppercase; border-left: 5px solid #1e40af; padding-left: 10px; margin: 20px 0 10px; }
        .bullet-point { margin-bottom: 8px; position: relative; padding-left: 20px; }
        .bullet-point::before { content: "â€¢"; position: absolute; left: 0; color: #3b82f6; font-weight: bold; }
        .pulse-loader { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
    </style>
</head>
<body>

    <div class="flex h-screen overflow-hidden">
        <aside class="w-72 bg-[#1e40af] text-white flex flex-col p-6 shadow-2xl">
            <div class="flex items-center gap-3 mb-10">
                <i class="fas fa-brain text-3xl"></i>
                <h1 class="text-2xl font-black italic">PrepIQ</h1>
            </div>
            
            <p class="text-[10px] font-bold opacity-50 uppercase tracking-widest mb-4">Select Subject</p>
            <nav class="space-y-2 overflow-y-auto pr-2" id="subject-menu">
                </nav>

            <div class="mt-auto p-4 bg-blue-800/50 rounded-2xl border border-blue-400/30">
                <label class="cursor-pointer flex flex-col items-center">
                    <i class="fas fa-cloud-upload-alt text-2xl mb-2"></i>
                    <span class="text-[10px] font-bold uppercase">Upload Unit Notes</span>
                    <input type="file" id="pdf-upload" class="hidden" multiple>
                </label>
            </div>
        </aside>

        <main class="flex-1 flex flex-col overflow-hidden">
            <header class="bg-white p-6 shadow-sm border-b flex justify-between items-center px-10">
                <div>
                    <h2 id="current-subject-title" class="text-xl font-extrabold text-slate-800 uppercase">Select a Subject to start</h2>
                    <p class="text-xs text-slate-400 font-semibold" id="subject-code-display">---</p>
                </div>
                <div class="flex gap-4">
                    <button onclick="exportToPDF()" class="bg-slate-800 text-white px-5 py-2 rounded-xl text-xs font-bold hover:bg-black transition flex items-center gap-2">
                        <i class="fas fa-file-pdf"></i> EXPORT PDF
                    </button>
                    <div class="bg-green-100 text-green-700 text-[10px] font-black px-4 py-2 rounded-full border border-green-200 uppercase tracking-tighter">
                        <i class="fas fa-check-circle mr-1"></i> System Online
                    </div>
                </div>
            </header>

            <div class="flex-1 overflow-y-auto p-8 space-y-8 bg-slate-50/50">
                <section>
                    <h3 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-6">Course Syllabus (Units)</h3>
                    <div id="unit-grid" class="grid grid-cols-5 gap-4">
                        </div>
                </section>

                <section class="bg-white rounded-[2rem] shadow-xl border border-slate-100 p-10 min-h-[500px]">
                    <div id="answer-box">
                        <div class="flex flex-col items-center justify-center h-full opacity-20 py-20">
                            <i class="fas fa-scroll text-8xl mb-4"></i>
                            <p class="text-xl font-bold italic tracking-tighter">Ask a question to generate exam-ready content</p>
                        </div>
                    </div>
                </section>
            </div>

            <footer class="p-6 bg-white border-t flex gap-4 items-center">
                <div class="flex gap-2">
                    <button onclick="setMark(2)" id="m2" class="px-4 py-2 border-2 rounded-xl text-[10px] font-bold mark-btn">2M</button>
                    <button onclick="setMark(8)" id="m8" class="px-4 py-2 border-2 rounded-xl text-[10px] font-bold mark-btn">8M</button>
                    <button onclick="setMark(16)" id="m16" class="px-4 py-2 border-2 rounded-xl text-[10px] font-bold mark-btn bg-blue-600 text-white">16M</button>
                </div>
                <div class="flex-1 flex items-center bg-slate-100 rounded-2xl px-6 border-2 border-transparent focus-within:border-blue-500 focus-within:bg-white transition-all shadow-inner">
                    <input id="user-input" type="text" placeholder="Type a topic (e.g., RSA Algorithm, User Personas)..." class="w-full bg-transparent outline-none py-4 text-sm font-semibold text-slate-700">
                    <button onclick="startVoice()" class="p-2 text-slate-400 hover:text-red-500 transition">
                        <i class="fas fa-microphone text-xl" id="mic-icon"></i>
                    </button>
                </div>
                <button onclick="generateContent()" class="bg-[#1e40af] text-white px-10 py-4 rounded-2xl font-black text-xs hover:shadow-2xl transition-all uppercase tracking-widest">Generate</button>
            </footer>
        </main>
    </div>

    <script>
        const subjects = {
            "CCS370": { name: "UI and UX Design", units: ["Foundations of UI/UX", "User Research & Personas", "Design Principles & Layouts", "Prototyping & Interaction", "Usability Testing & Evaluation"] },
            "CCW331": { name: "Business Analytics", units: ["Introduction to BA", "Data Management", "Descriptive Analytics", "Predictive Modeling", "Decision Analytics"] },
            "CCS340": { name: "Cyber Security", units: ["Cyber Crime Overview", "Cyber Offenses", "Tools and Methods", "Security Protocols", "Legal Perspectives"] },
            "OEE351": { name: "Renewable Energy System", units: ["Solar Energy", "Wind Energy", "Bio-Energy", "Hydro Power", "Hybrid Systems"] },
            "CCS345": { name: "Ethics and AI", units: ["Moral Principles", "Algorithmic Bias", "AI Accountability", "Human-AI Interaction", "Future of AI Ethics"] },
            "CS3691": { name: "Embedded Systems and IoT", units: ["Introduction to Embedded", "IoT Architecture", "Sensors and Actuators", "Connectivity Protocols", "IoT Security"] }
        };

        let activeSubject = "";
        let activeMark = 16;
        let pdfText = "";

        // Initialize Subject List
        const menu = document.getElementById('subject-menu');
        Object.keys(subjects).forEach(code => {
            const btn = document.createElement('button');
            btn.className = "w-full text-left p-4 text-[11px] font-bold rounded-xl hover:bg-white/10 transition-all border-b border-white/5 flex flex-col";
            btn.innerHTML = `<span class="opacity-60 text-[8px]">${code}</span><span>${subjects[code].name}</span>`;
            btn.onclick = () => selectSubject(code);
            menu.appendChild(btn);
        });

        function selectSubject(code) {
            activeSubject = code;
            document.getElementById('current-subject-title').innerText = subjects[code].name;
            document.getElementById('subject-code-display').innerText = `Subject Code: ${code} | Processing Datasets...`;
            
            const grid = document.getElementById('unit-grid');
            grid.innerHTML = "";
            subjects[code].units.forEach((unit, i) => {
                grid.innerHTML += `
                    <div class="unit-card bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col items-center justify-center text-center">
                        <span class="text-[9px] font-black text-blue-600 uppercase mb-2">Unit ${i+1}</span>
                        <p class="text-[11px] font-extrabold text-slate-800 leading-tight">${unit}</p>
                    </div>
                `;
            });
        }

        function setMark(m) {
            activeMark = m;
            document.querySelectorAll('.mark-btn').forEach(btn => btn.classList.remove('bg-blue-600', 'text-white'));
            document.getElementById('m'+m).classList.add('bg-blue-600', 'text-white');
        }

        // Voice Recognition
        function startVoice() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.onstart = () => document.getElementById('mic-icon').classList.add('text-red-500', 'animate-pulse');
            recognition.onresult = (e) => {
                document.getElementById('user-input').value = e.results[0][0].transcript;
                document.getElementById('mic-icon').classList.remove('text-red-500', 'animate-pulse');
            };
            recognition.start();
        }

        // Content Generation with Bullets and Sub-topics
        function generateContent() {
            const q = document.getElementById('user-input').value;
            if(!q) return;

            const box = document.getElementById('answer-box');
            box.innerHTML = `<div class="pulse-loader space-y-4"><div class="h-8 bg-slate-100 w-1/2 rounded"></div><div class="h-48 bg-slate-100 rounded"></div><div class="h-48 bg-slate-100 rounded"></div></div>`;

            setTimeout(() => {
                let html = `<h2 class="text-3xl font-black text-slate-800 mb-8">${q.toUpperCase()}</h2>`;
                
                // Detailed Structural Content
                html += `
                    <div class="side-heading">Introduction</div>
                    <div class="bullet-point">The concept of ${q} plays a vital role in ${subjects[activeSubject]?.name || 'the subject'} curriculum.</div>
                    <div class="bullet-point">It establishes the fundamental framework for technical implementation and theoretical analysis.</div>

                    <div class="side-heading">Definition</div>
                    <div class="bullet-point"><strong>${q}:</strong> Refers to the systematic protocol used to manage and verify system states as per standard university modules.</div>
                    
                    <div class="side-heading">Diagram / Architecture Description</div>
                    <div class="bg-slate-50 border-4 border-dashed border-slate-200 p-10 rounded-3xl text-center mb-6">
                        <p class="text-2xl font-black text-slate-300 mb-2 uppercase tracking-tighter">[ Diagram of ${q} ]</p>
                        <p class="text-[10px] text-slate-400 font-bold uppercase">The schematic representation shows the interaction between primary nodes and data flow layers.</p>
                    </div>
                    <div class="bullet-point">The architecture consists of the Input Layer, Processing Core, and Validation Interface.</div>
                    <div class="bullet-point">Feedback loops are utilized to maintain system integrity during peak loads.</div>

                    <div class="side-heading">Advantages</div>
                    <div class="bullet-point">High scalability and robust performance in real-time environments.</div>
                    <div class="bullet-point">Enhanced security measures prevent unauthorized data manipulation.</div>

                    <div class="side-heading">Disadvantages</div>
                    <div class="bullet-point">High initial setup cost and complexity in architectural design.</div>
                    <div class="bullet-point">Requires skilled professionals for maintenance and troubleshooting.</div>

                    <div class="side-heading">Applications</div>
                    <div class="bullet-point">Used in industrial automation systems and smart grid management.</div>
                    <div class="bullet-point">Widely implemented in enterprise-level cloud security frameworks.</div>

                    <div class="side-heading">Conclusion</div>
                    <div class="bullet-point font-semibold italic">In conclusion, mastering ${q} is essential for academic excellence and professional application in ${activeSubject}.</div>
                `;
                box.innerHTML = html;
            }, 1000);
        }

        // PDF Export
        async function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const content = document.getElementById('answer-box').innerText;
            doc.setFontSize(16);
            doc.text("PrepIQ Generated Answer", 20, 20);
            doc.setFontSize(10);
            doc.text(doc.splitTextToSize(content, 180), 20, 30);
            doc.save(`PrepIQ_Answer_${activeSubject}.pdf`);
        }
    </script>
</body>
</html>
