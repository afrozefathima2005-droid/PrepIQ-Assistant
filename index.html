<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrepBot IQ - AI Answer Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .active-topic { background-color: #2b6cb0; color: white; border-right: 4px solid #1a365d; }
        .active-mark { background-color: #2563eb; color: white; border-color: #1e3a8a; }
        .chat-container::-webkit-scrollbar { width: 6px; }
        .chat-container::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-[#f3f7fa] font-sans text-slate-800">

    <nav class="bg-[#2b6cb0] text-white p-3 px-6 flex justify-between items-center shadow-md">
        <div class="flex items-center gap-3">
            <i class="fas fa-smile-beam text-2xl"></i>
            <h1 class="text-lg font-bold">PrepBot IQ <span class="font-normal text-sm opacity-80">â€” Subject Answer Generator</span></h1>
        </div>
        <div class="flex gap-6 items-center">
            <i class="fas fa-bell cursor-pointer"></i>
            <div class="flex items-center gap-1 cursor-pointer">
                <i class="fas fa-globe"></i><i class="fas fa-chevron-down text-xs"></i>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-6 grid grid-cols-12 gap-6">
        
        <div class="col-span-3 space-y-6">
            <div class="bg-white rounded shadow-sm overflow-hidden border">
                <div class="bg-[#2b6cb0] text-white p-3 font-bold text-xs uppercase">Select Subject</div>
                <div id="topic-list" class="flex flex-col text-sm">
                    <button onclick="setTopic('CCS340')" class="p-3 text-left border-b hover:bg-slate-50 active-topic">Cyber Security (CCS340)</button>
                    <button onclick="setTopic('CCW331')" class="p-3 text-left border-b hover:bg-slate-50">Business Analytics (CCW331)</button>
                    <button onclick="setTopic('CS3691')" class="p-3 text-left border-b hover:bg-slate-50">Embedded & IoT (CS3691)</button>
                    <button onclick="setTopic('CCS345')" class="p-3 text-left border-b hover:bg-slate-50">Ethics and AI (CCS345)</button>
                </div>
            </div>

            <div class="bg-white rounded shadow-sm border p-4">
                <div class="text-[#2b6cb0] font-bold text-xs uppercase mb-3">Answer Length</div>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setMarks(2)" id="m2" class="border py-2 text-xs rounded font-bold hover:bg-blue-50">2M</button>
                    <button onclick="setMarks(8)" id="m8" class="border py-2 text-xs rounded font-bold hover:bg-blue-50">8M</button>
                    <button onclick="setMarks(16)" id="m16" class="border py-2 text-xs rounded font-bold active-mark">16M</button>
                </div>
            </div>

            <div class="bg-white rounded shadow-sm border p-4">
                <label class="cursor-pointer flex items-center justify-center gap-3 bg-slate-50 border-2 border-dashed border-slate-200 p-4 rounded-xl hover:bg-slate-100 transition">
                    <i class="fas fa-cloud-upload-alt text-blue-500"></i>
                    <span class="text-xs font-bold text-slate-600 uppercase">Upload Notes</span>
                    <input type="file" class="hidden" onchange="processNotes()">
                </label>
            </div>
        </div>

        <div class="col-span-9 flex flex-col h-[750px] bg-white rounded shadow-lg border relative">
            <div class="p-4 border-b flex justify-between items-center bg-slate-50">
                <span id="current-header" class="font-bold text-slate-700">Generating 16-Mark Answer: CCS340</span>
                <div class="flex gap-4">
                    <button onclick="voiceOutput()" class="text-blue-600 hover:scale-110 transition"><i class="fas fa-volume-up"></i></button>
                </div>
            </div>

            <div id="chat-window" class="flex-1 overflow-y-auto p-8 space-y-6 chat-container">
                <div class="flex gap-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center shrink-0 border"><i class="fas fa-robot text-blue-600"></i></div>
                    <div id="ai-response" class="border border-slate-200 p-8 rounded-2xl bg-slate-50 w-full text-sm">
                        <p class="text-slate-500 italic mb-4">Please upload notes or type a question to generate a structured answer...</p>
                    </div>
                </div>
            </div>

            <div class="p-5 border-t bg-white">
                <div class="flex items-center gap-4 border rounded-2xl px-5 py-3 bg-slate-50 focus-within:bg-white focus-within:ring-2 focus-within:ring-blue-200 transition-all">
                    <input id="user-input" type="text" placeholder="Type a topic (e.g., RSA Algorithm)..." class="bg-transparent flex-1 outline-none text-sm">
                    <i class="fas fa-microphone text-slate-400 cursor-pointer hover:text-red-500 text-lg" onclick="startVoiceInput()"></i>
                    <button onclick="generateAnswer()" class="bg-[#2b6cb0] text-white px-8 py-2 rounded-xl font-bold text-sm hover:bg-blue-700">Generate</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        let currentSubject = 'CCS340';
        let currentMarks = 16;

        const subjectNames = {
            'CCS340': 'Cyber Security',
            'CCW331': 'Business Analytics',
            'CS3691': 'Embedded & IoT',
            'CCS345': 'Ethics and AI'
        };

        function setTopic(code) {
            currentSubject = code;
            document.querySelectorAll('#topic-list button').forEach(b => b.classList.remove('active-topic'));
            event.currentTarget.classList.add('active-topic');
            updateHeader();
        }

        function setMarks(val) {
            currentMarks = val;
            [2, 8, 16].forEach(m => {
                document.getElementById(`m${m}`).className = (m === val) ? "border py-2 text-xs rounded font-bold active-mark" : "border py-2 text-xs rounded font-bold hover:bg-blue-50";
            });
            updateHeader();
        }

        function updateHeader() {
            document.getElementById('current-header').innerText = `Generating ${currentMarks}-Mark Answer: ${currentSubject}`;
        }

        function startVoiceInput() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.onstart = () => document.querySelector('.fa-microphone').classList.add('text-red-500');
            recognition.onresult = (e) => {
                document.getElementById('user-input').value = e.results[0][0].transcript;
                document.querySelector('.fa-microphone').classList.remove('text-red-500');
            };
            recognition.start();
        }

        function generateAnswer() {
            const topic = document.getElementById('user-input').value;
            const display = document.getElementById('ai-response');
            
            if(!topic) return;

            // Simulated AI Logic for Answer Structuring
            let content = `<h2 class="text-xl font-bold text-blue-800 mb-4">${topic}</h2>`;
            
            if(currentMarks == 2) {
                content += `<p class="font-bold">Definition:</p><p class="mb-2">Brief technical overview of ${topic} based on ${subjectNames[currentSubject]} notes.</p>`;
            } else if(currentMarks == 8) {
                content += `<p class="font-bold mb-2">Key Features:</p><ul class="list-disc ml-5 mb-4"><li>Main characteristic 1</li><li>Technical aspect 2</li><li>Working principle</li></ul>`;
            } else {
                content += `<p class="font-bold mb-2">Detailed Architecture:</p>
                            <div class="bg-white p-4 border rounded mb-4 shadow-inner">
                                <p><strong>Step 1: Initiation</strong> - Process starts via subject protocols.</p>
                                <p><strong>Step 2: Processing</strong> - Data is analyzed per ${subjectNames[currentSubject]} standards.</p>
                                <p><strong>Step 3: Output</strong> - Final state verification.</p>
                            </div>
                            <div class="text-center p-6 bg-white border rounded mb-4">
                                
                                <p class="text-[10px] text-slate-400 mt-2 italic">Figure: Generated based on uploaded notes</p>
                            </div>`;
            }

            display.innerHTML = content;
            document.getElementById('user-input').value = "";
        }

        function voiceOutput() {
            const text = document.getElementById('ai-response').innerText;
            const speech = new SpeechSynthesisUtterance(text);
            window.speechSynthesis.speak(speech);
        }

        function processNotes() {
            alert("Notes analyzed! You can now generate structured 2, 8, or 16-mark answers.");
        }
    </script>
</body>
</html>
